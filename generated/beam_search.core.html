<!DOCTYPE html>
<html class="writer-html5" lang="y" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>beam_search.core &mdash; Conversation Alignment January 2023 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Conversation Alignment
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">beam_search.core</a><ul>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor</span></code></a><ul>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor._handle_message_actions"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor._handle_message_actions()</span></code></a></li>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor._prep_for_new_search"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor._prep_for_new_search()</span></code></a></li>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor._reconstruct_beam_w_output"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor._reconstruct_beam_w_output()</span></code></a></li>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor.beam_search"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor.beam_search()</span></code></a></li>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor.k"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor.k</span></code></a></li>
<li><a class="reference internal" href="#beam_search.core.BeamSearchExecutor.max_fallbacks"><code class="docutils literal notranslate"><span class="pre">BeamSearchExecutor.max_fallbacks</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Conversation Alignment</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">beam_search.core</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/beam_search.core.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-beam_search.core">
<span id="beam-search-core"></span><h1>beam_search.core<a class="headerlink" href="#module-beam_search.core" title="Permalink to this heading"></a></h1>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beam_search.core.BeamSearchExecutor" title="beam_search.core.BeamSearchExecutor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BeamSearchExecutor</span></code></a>(k, max_fallbacks, ...[, ...])</p></td>
<td><p>Class that houses all information needed to execute the beam search algorithm.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BeamSearchExecutor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_fallbacks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/beam_search/core.html#BeamSearchExecutor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#beam_search.core.BeamSearchExecutor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that houses all information needed to execute the beam search
algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k</strong> (<em>int</em>) -- The number of beams to use.</p></li>
<li><p><strong>max_fallbacks</strong> (<em>int</em>) -- The maximum number of fallbacks that can occur
in any beam before the probability is tanked by resetting the
score to the log of a low number epsilon.</p></li>
<li><p><strong>conversation</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em>) -- <p>The self.conversation to be
explored. Should be in the format</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;AGENT&quot;</span><span class="p">:</span> <span class="s2">&quot;Hi!&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;USER&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello.&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</p></li>
<li><p><strong>build_graph</strong> (<em>bool</em>) -- Indicates if diagrams are to be compiled.
Defaults to True.</p></li>
<li><p><strong>graph_file</strong> (<em>str</em>) -- The file where the image will be
generated.</p></li>
<li><p><strong>**kwargs</strong> -- Any parameters necessary to instantiate your
Rollout class.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor._handle_message_actions">
<span class="sig-name descname"><span class="pre">_handle_message_actions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/beam_search/core.html#BeamSearchExecutor._handle_message_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#beam_search.core.BeamSearchExecutor._handle_message_actions" title="Permalink to this definition"></a></dt>
<dd><p>Handles &quot;message actions&quot; for all beams.</p>
<p>A &quot;message action&quot; occurs when an action only has one possible outcome.
In that case, that outcome should be immediately executed as the action
doesn't take (or need) any user input to execute that outcome.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor._prep_for_new_search">
<span class="sig-name descname"><span class="pre">_prep_for_new_search</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/beam_search/core.html#BeamSearchExecutor._prep_for_new_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#beam_search.core.BeamSearchExecutor._prep_for_new_search" title="Permalink to this definition"></a></dt>
<dd><p>Resets the beams and graph generator to begin a new search.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor._reconstruct_beam_w_output">
<span class="sig-name descname"><span class="pre">_reconstruct_beam_w_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="beam_search.data_structs.html#beam_search.data_structs.Action" title="beam_search.data_structs.Action"><span class="pre">Action</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="beam_search.data_structs.html#beam_search.data_structs.Intent" title="beam_search.data_structs.Intent"><span class="pre">Intent</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="beam_search.data_structs.html#beam_search.data_structs.Beam" title="beam_search.data_structs.Beam"><span class="pre">Beam</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/beam_search/core.html#BeamSearchExecutor._reconstruct_beam_w_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#beam_search.core.BeamSearchExecutor._reconstruct_beam_w_output" title="Permalink to this definition"></a></dt>
<dd><p>Reconstructs/creates new beams given the top k outputs determined.
Note: The outputs cannot simply be appended to the appropriate beam
as it often occurs that a single beam will be &quot;extended&quot; more than once
and those options need to be stored as new, separate beams.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>outputs</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="beam_search.data_structs.html#beam_search.data_structs.Action" title="beam_search.data_structs.Action"><em>Action</em></a><em>, </em><a class="reference internal" href="beam_search.data_structs.html#beam_search.data_structs.Intent" title="beam_search.data_structs.Intent"><em>Intent</em></a><em>]</em><em>]</em>) -- The top k actions or
intents that match the last utterance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The new Beams with the outputs added.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="beam_search.data_structs.html#beam_search.data_structs.Beam" title="beam_search.data_structs.Beam">Beam</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor.beam_search">
<span class="sig-name descname"><span class="pre">beam_search</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/beam_search/core.html#BeamSearchExecutor.beam_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#beam_search.core.BeamSearchExecutor.beam_search" title="Permalink to this definition"></a></dt>
<dd><p>The main beam search algorithm.</p>
<p>NOTE: We assume that the provided conversation begins with an action,
due to the fact that in dialogue-as-planning, agents use actions and
users respond to those actions with one of a set of given intents.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor.k">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">k</span></span><a class="headerlink" href="#beam_search.core.BeamSearchExecutor.k" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="beam_search.core.BeamSearchExecutor.max_fallbacks">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_fallbacks</span></span><a class="headerlink" href="#beam_search.core.BeamSearchExecutor.max_fallbacks" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Natalie Nova, Rebecca De Venezia.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>